version: v1.0
name: Semaphore 50
agent:
  machine:
    type: e1-standard-4
    os_image: ubuntu1804
execution_time_limit:
  hours: 24
blocks:
  - name: Build project
    execution_time_limit:
      hours: 24
    task:
      jobs:
        - name: go get & build
          execution_time_limit:
            hours: 24
          parallelism: 25
          commands:
            - >-
              sudo sh -c 'echo deb https://apt.buildkite.com/buildkite-agent stable main > /etc/apt/sources.list.d/buildkite-agent.list' && sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv-keys 32A37959C2FA5C3C99EFBC32A79206696452D198 && sudo apt-get update && sudo apt-get install -y buildkite-agent && sudo sed -i "s/xxx/81725c0b9a6f3ba6c98fde05ea5d20429c17c2b8458c06423c/g" /etc/buildkite-agent/buildkite-agent.cfg && sudo systemctl enable buildkite-agent && sudo systemctl start
              buildkite-agent && journalctl -f -u buildkite-agent
